<!doctype html>
<html ng-app="myApp">
<head>
  <meta charset="utf-8">
  <title>todolist</title>
  <link rel="stylesheet" href="../Bootstrap-3.3.0/css/bootstrap.css">
  <script src="../angular-1.4.1/angular.min.js"></script>
  <style>
    #content{
      width: 400px;
      margin: 5px auto;
      background-color: #f5f5f5;
      border: 1px solid #eee;
      border-radius: 4px;
      padding: 15px 15px 50px 15px;;
    }
    ul{
      list-style: none;
      padding: 0;
      margin: 0 0 10px 0;
    }
    .done-true{
      text-decoration: line-through;
      color: #ccc;
    }
  </style>
</head>
<body>
  <div id="content">
    <h2>任务列表</h2>
    <div ng-controller="todoListCtrl">
      <span>任务总数: {{todos.length}}, 还有:{{remaining()}}未完成</span>
      [<a href="" ng-click="archive()">完成</a>]
      <ul>
        <li ng-repeat="todo in todos">
          <input type="checkbox" ng-model="todo.done">
          <span ng-bind="todo.text"></span>
        </li>
      </ul>

      <form ng-submit="addToDo()" class="form-horizontal">
        <div class="form-gorup">
          <div class="col-sm-9">
            <input type="text" ng-model="todoText" placeholder="填入新任务" class="form-control">
          </div>
          <div class="col-sm-2">
            <button class="btn btn-primary">添加</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script>
    var app = angular.module('myApp', []);
    app.controller('todoListCtrl', ['$scope', '$http', function($scope,$http){
      $http.get('todo.json').success(function(response){
        $scope.todos = response.todos;
      });
      $scope.remaining = function(){
        var count = 0;
        $scope.todos.forEach(function(ele){
          count += ele.done?1:0;
        });
        return $scope.todos.length-count;
      };
      $scope.archive = function(){
        //to go on
        //http://blog.csdn.net/ying422/article/details/45564245
      };
      $scope.addToDo = function(){
        $scope.todos.push({text:$scope.todoText,done:false});
        $scope.todoText = '';
      };
    }]);
  </script>
</body>
</html>
